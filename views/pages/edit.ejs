<%-include('../partials/header.ejs')%>

<div>
  <h1 class="text-3xl font-medium px-8 text-gray-700 mb-4">Edit Book</h1>
  <form
    id="form"
    class="rounded px-8 pt-6 mb-4"
    action=""
    method="post"
    onsubmit="return handleForm(this)"
  >
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="username">
        Book Title
      </label>
      <input
        class="bg-transparent shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
        id="username"
        type="text"
        name="name"
        value="<%=books.name %>"
        placeholder="Enter book name"
      />
      <p class="text-red-500" id="nameError"></p>
    </div>
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="email">
        Author
      </label>
      <input
        class="bg-transparent shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
        id="author"
        type="text"
        name="author"
        value="<%=books.author %>"
        placeholder="Enter author of book"
      />
      <p class="text-red-500" id="authorError"></p>
    </div>
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="booktype">
        Book Type
      </label>
      <select
        class="bg-transparent shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
        id="booktype"
        name="booktype"
        value="<%=books.booktype %>"
      >
        <option value="" class="text-gray-800" disabled selected>
          --select book type--
        </option>
        <option <%= books.booktype === 'General' ? 'selected' : '' %> value="General" class="text-gray-800">General</option>
        <option <%= books.booktype === 'Sci-Fi' ? 'selected' : '' %> value="Sci-Fi" class="text-gray-800">Sci-Fi</option>
        <option <%= books.booktype === 'Crime & Mystery' ? 'selected' : '' %> value="Crime & Mystery" class="text-gray-800">Crime & Mystery</option>
        <option <%= books.booktype === 'Romance' ? 'selected' : '' %> value="Romance" class="text-gray-800">Romance</option>
        <option <%= books.booktype === 'History' ? 'selected' : '' %> value="History" class="text-gray-800">History</option>
      </select>
      <p class="text-red-500" id="booktypeError"></p>
    </div>
    <div class="mb-6 flex gap-5">
      <div class="w-1/3">
        <label
          class="block text-gray-700 text-sm font-bold mb-2"
          for="publishedyear"
        >
          Published Year
        </label>
        <input
          class="bg-transparent shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          id="publishedyear"
          type="text"
          name="pyear"
          value="<%=books.pyear %>"
          placeholder="Enter published year"
        />
        <p class="text-red-500" id="pyearError"></p>
      </div>
      <div class="w-1/3">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="stock">
          Stock
        </label>
        <input
          class="bg-transparent shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          id="stock"
          type="text"
          name="stock"
          value="<%=books.stock %>"
          placeholder="Enter total stock"
        />
        <p class="text-red-500" id="stockError"></p>
      </div>
      <div class="w-1/3">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="price">
          Book Price
        </label>
        <input
          class="bg-transparent shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
          id="price"
          type="text"
          name="price"
          value="<%=books.price %>"
          placeholder="Enter book price"
        />
        <p class="text-red-500" id="priceError"></p>
      </div>
    </div>

    <div class="flex items-center justify-between">
      <button
        class="bg-[#0dd6b8] text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
        type="submit"
      >
        Update Book
      </button>
    </div>
  </form>
</div>

<%-include('../partials/footer.ejs')%>

<script>
  function handleForm(e) {
    let submit = true;
    const nameError = document.getElementById("nameError");
    const authorError = document.getElementById("authorError");
    const booktypeError = document.getElementById("booktypeError");
    const pyearError = document.getElementById("pyearError");
    const stockError = document.getElementById("stockError");
    const priceError = document.getElementById("priceError");

    if (e.name.value.trim() === "") {
      nameError.innerText = "please enter your name";
      submit = false;
    } else {
      nameError.innerText = "";
    }

    if (e.author.value.trim() === "") {
      authorError.innerText = "please enter book author";
      submit = false;
    } else {
      authorError.innerText = "";
    }

    if (e.booktype.value.trim() === "") {
      booktypeError.innerText = "please select book type";
      submit = false;
    } else {
      booktypeError.innerText = "";
    }

    if (e.pyear.value.trim() === "") {
      pyearError.innerText = "please enter published year";
      submit = false;
    } else {
      pyearError.innerText = "";
    }

    if (e.stock.value.trim() === "") {
      stockError.innerText = "please enter total stock  ";
      submit = false;
    } else {
      stockError.innerText = "";
    }

    if (e.price.value.trim() === "") {
      priceError.innerText = "please enter book value";
      submit = false;
    } else {
      priceError.innerText = "";
    }

    return submit;
  }
</script>
